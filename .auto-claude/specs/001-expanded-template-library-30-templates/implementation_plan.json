{
  "feature": "Expanded Template Library (30+ Templates)",
  "workflow_type": "feature",
  "workflow_rationale": "This is new feature development expanding existing functionality. We're adding net-new templates and categories to increase product value and user engagement options, not fixing bugs or refactoring existing code.",
  "phases": [
    {
      "id": "phase-1-type-system",
      "name": "Type System Update",
      "type": "implementation",
      "description": "Add 7 new template categories to TypeScript type definitions",
      "depends_on": [],
      "parallel_safe": true,
      "subtasks": [
        {
          "id": "subtask-1-1",
          "description": "Add new category types to TemplateCategory union",
          "service": "frontend",
          "files_to_modify": ["./app/src/lib/templates/types.ts"],
          "files_to_create": [],
          "patterns_from": ["./app/src/lib/templates/types.ts"],
          "verification": {
            "type": "command",
            "command": "cd app && npm run build",
            "expected": "Build completes with no TypeScript errors"
          },
          "status": "pending",
          "notes": "Add 7 new categories to type union: predictions, case-study, before-after, lessons-learned, tool-review, comparison, and one more variation. This must be done before adding templates to ensure type safety."
        }
      ]
    },
    {
      "id": "phase-2-category-labels",
      "name": "Category Label Mapping",
      "type": "implementation",
      "description": "Add display labels for new template categories",
      "depends_on": ["phase-1-type-system"],
      "parallel_safe": true,
      "subtasks": [
        {
          "id": "subtask-2-1",
          "description": "Add new category labels to categoryLabels object",
          "service": "frontend",
          "files_to_modify": ["./app/src/lib/templates/data.ts"],
          "files_to_create": [],
          "patterns_from": ["./app/src/lib/templates/data.ts"],
          "verification": {
            "type": "command",
            "command": "cd app && npm run build",
            "expected": "Build completes successfully"
          },
          "status": "pending",
          "notes": "Add entries to categoryLabels object mapping new category slugs to display names (e.g., 'predictions' -> 'Predictions', 'case-study' -> 'Case Studies')"
        }
      ]
    },
    {
      "id": "phase-3-new-templates",
      "name": "New Template Content",
      "type": "implementation",
      "description": "Create 15+ new templates across new and existing categories",
      "depends_on": ["phase-2-category-labels"],
      "parallel_safe": true,
      "subtasks": [
        {
          "id": "subtask-3-1",
          "description": "Add 2-3 Predictions templates",
          "service": "frontend",
          "files_to_modify": ["./app/src/lib/templates/data.ts"],
          "files_to_create": [],
          "patterns_from": ["./app/src/lib/templates/data.ts"],
          "verification": {
            "type": "command",
            "command": "cd app && npm run build",
            "expected": "Build succeeds, predictions templates compile"
          },
          "status": "pending",
          "notes": "Create templates for industry predictions, trend forecasts. Use kebab-case IDs like 'pred1-industry-trend', 'pred2-tech-forecast'. Include expectedScore [65, 80] range and example for at least one."
        },
        {
          "id": "subtask-3-2",
          "description": "Add 2-3 Case Study templates",
          "service": "frontend",
          "files_to_modify": ["./app/src/lib/templates/data.ts"],
          "files_to_create": [],
          "patterns_from": ["./app/src/lib/templates/data.ts"],
          "verification": {
            "type": "command",
            "command": "cd app && npm run build",
            "expected": "Build succeeds, case-study templates compile"
          },
          "status": "pending",
          "notes": "Create templates for growth analysis, success/failure breakdowns. Use IDs like 'cs1-growth-breakdown', 'cs2-failure-analysis'. Include expectedScore [70, 85] and examples."
        },
        {
          "id": "subtask-3-3",
          "description": "Add 2 Before/After templates",
          "service": "frontend",
          "files_to_modify": ["./app/src/lib/templates/data.ts"],
          "files_to_create": [],
          "patterns_from": ["./app/src/lib/templates/data.ts"],
          "verification": {
            "type": "command",
            "command": "cd app && npm run build",
            "expected": "Build succeeds, before-after templates compile"
          },
          "status": "pending",
          "notes": "Create templates for transformation stories with clear contrast. Use IDs like 'ba1-transformation', 'ba2-progress'. expectedScore [75, 90]."
        },
        {
          "id": "subtask-3-4",
          "description": "Add 2 Lessons Learned templates",
          "service": "frontend",
          "files_to_modify": ["./app/src/lib/templates/data.ts"],
          "files_to_create": [],
          "patterns_from": ["./app/src/lib/templates/data.ts"],
          "verification": {
            "type": "command",
            "command": "cd app && npm run build",
            "expected": "Build succeeds, lessons-learned templates compile"
          },
          "status": "pending",
          "notes": "Create templates for post-mortem insights and key takeaways. Use IDs like 'll1-project-learnings', 'll2-mistake-reflection'. expectedScore [65, 80]."
        },
        {
          "id": "subtask-3-5",
          "description": "Add 2 Tool Review templates",
          "service": "frontend",
          "files_to_modify": ["./app/src/lib/templates/data.ts"],
          "files_to_create": [],
          "patterns_from": ["./app/src/lib/templates/data.ts"],
          "verification": {
            "type": "command",
            "command": "cd app && npm run build",
            "expected": "Build succeeds, tool-review templates compile"
          },
          "status": "pending",
          "notes": "Create templates for honest product evaluations and recommendations. Use IDs like 'tr1-tool-breakdown', 'tr2-comparison'. expectedScore [60, 75]."
        },
        {
          "id": "subtask-3-6",
          "description": "Add 2 Comparison templates",
          "service": "frontend",
          "files_to_modify": ["./app/src/lib/templates/data.ts"],
          "files_to_create": [],
          "patterns_from": ["./app/src/lib/templates/data.ts"],
          "verification": {
            "type": "command",
            "command": "cd app && npm run build",
            "expected": "Build succeeds, comparison templates compile"
          },
          "status": "pending",
          "notes": "Create templates for side-by-side evaluations. Use IDs like 'cmp1-vs-comparison', 'cmp2-option-analysis'. expectedScore [65, 80]."
        },
        {
          "id": "subtask-3-7",
          "description": "Add 5-7 templates to existing categories",
          "service": "frontend",
          "files_to_modify": ["./app/src/lib/templates/data.ts"],
          "files_to_create": [],
          "patterns_from": ["./app/src/lib/templates/data.ts"],
          "verification": {
            "type": "command",
            "command": "cd app && npm run build",
            "expected": "Build succeeds, total template count >= 30"
          },
          "status": "pending",
          "notes": "Expand existing categories with more variations. Add to contrarian, list, story, value, or teaching. Ensure total templates >= 30. Follow existing naming patterns."
        }
      ]
    },
    {
      "id": "phase-4-integration",
      "name": "Integration Verification",
      "type": "integration",
      "description": "Verify all new templates render correctly in the UI and pass quality checks",
      "depends_on": ["phase-3-new-templates"],
      "parallel_safe": false,
      "subtasks": [
        {
          "id": "subtask-4-1",
          "description": "Verify template count and structure validation",
          "service": "frontend",
          "files_to_modify": [],
          "files_to_create": [],
          "patterns_from": [],
          "verification": {
            "type": "manual",
            "instructions": "1. Verify templates.length >= 30\n2. Check all template IDs are unique\n3. Validate all expectedScore values are [min, max] where 0 <= min < max <= 100\n4. Confirm every {placeholder} in template strings has matching entry in placeholders array\n5. Verify all template.category values match TemplateCategory type"
          },
          "status": "pending",
          "notes": "Run comprehensive validation checks on template data structure"
        },
        {
          "id": "subtask-4-2",
          "description": "Browser verification of new templates",
          "service": "frontend",
          "files_to_modify": [],
          "files_to_create": [],
          "patterns_from": [],
          "verification": {
            "type": "browser",
            "url": "http://localhost:5173",
            "checks": [
              "New categories appear in category filter list",
              "New templates display in template grid",
              "Template cards show name, category, score range",
              "Clicking template shows details with placeholders and examples",
              "No console errors during template browsing",
              "Existing templates still work correctly"
            ]
          },
          "status": "pending",
          "notes": "Manual browser testing to ensure UI integration works correctly"
        }
      ]
    }
  ],
  "summary": {
    "total_phases": 4,
    "total_subtasks": 9,
    "services_involved": ["frontend"],
    "parallelism": {
      "max_parallel_phases": 1,
      "parallel_groups": [],
      "recommended_workers": 1,
      "speedup_estimate": "Sequential execution required due to type dependencies"
    },
    "startup_command": "source auto-claude/.venv/bin/activate && python auto-claude/run.py --spec 001 --parallel 1"
  },
  "verification_strategy": {
    "risk_level": "medium",
    "skip_validation": false,
    "test_creation_phase": "post_implementation",
    "test_types_required": ["unit", "integration"],
    "security_scanning_required": false,
    "staging_deployment_required": false,
    "acceptance_criteria": [
      "At least 30 templates exist in data.ts",
      "At least 10 categories defined in TemplateCategory type",
      "All template IDs are unique",
      "All expectedScore ranges are valid [min, max] with 0 <= min < max <= 100",
      "All placeholders in templates have matching entries in placeholders array",
      "No TypeScript compilation errors",
      "Templates render correctly in browser UI",
      "No console errors during template browsing",
      "Existing templates still function correctly"
    ],
    "verification_steps": [
      {
        "name": "TypeScript Type Check",
        "command": "cd app && npm run build",
        "expected_outcome": "Build completes with no type errors",
        "type": "test",
        "required": true,
        "blocking": true
      },
      {
        "name": "Template Data Validation",
        "command": "manual",
        "expected_outcome": "All templates have valid structure, unique IDs, valid score ranges",
        "type": "test",
        "required": true,
        "blocking": true
      },
      {
        "name": "Browser UI Verification",
        "command": "cd app && npm run dev",
        "expected_outcome": "Templates render correctly, category filters work, no console errors",
        "type": "manual",
        "required": true,
        "blocking": true
      }
    ],
    "reasoning": "Medium risk due to templates being a key product differentiator. Quality matters. Need unit validation of data structure and integration testing of UI rendering/filtering. No security concerns for this frontend data change."
  },
  "qa_acceptance": {
    "unit_tests": {
      "required": true,
      "commands": ["cd app && npm run build"],
      "minimum_coverage": null
    },
    "integration_tests": {
      "required": true,
      "commands": ["cd app && npm run dev"],
      "services_to_test": ["frontend"]
    },
    "e2e_tests": {
      "required": false,
      "commands": [],
      "flows": []
    },
    "browser_verification": {
      "required": true,
      "pages": [
        {
          "url": "http://localhost:5173",
          "checks": [
            "New templates appear in grid",
            "Category filters show new categories",
            "Template details display correctly",
            "Score ranges visible",
            "Examples render when present",
            "No console errors",
            "Existing templates still work"
          ]
        }
      ]
    },
    "database_verification": {
      "required": false,
      "checks": []
    }
  },
  "qa_signoff": null
}
